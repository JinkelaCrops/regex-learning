# 通配符和正则表达式的区别

通配符是指按照一定的模式匹配一个或多个真正的字符，比如`Notep?d`可以对应`Notepad`, `Noteped`，是一种模糊检索的方式。在Linux和类Unix系统中的Shell命令行中，通配符被广泛使用。与简单的通配符不同，正则表达式要强大的多。正则表达式于1960s由Thompson引入Unix系统的标准文本编辑器，自此以后正则表达式被广泛地应用于各种Unix或类Unix系统的工具中。正则表达式遵循一定的规范，最著名的是从Perl衍生出来的PCRE（Per Compatible Regular Expression）规范和POSIX（Portable Operating System Interface for Unix）规范定义的正则规范。目前，各个编程语言都或多或少地支持一定的程度的正则表达式，但是也有一些自己特有的不同之处。

# 引入问题

正则表达式是处理文本和字符串的利器。假设你想检查一个邮箱地址是否合法，如果不用正则表达式，请问你会用什么来处理呢？自己编写一段复杂的字符串匹配的代码吗？利用正则表达式，我们可以使用一句不太长的字符，完成一个很复杂的功能。但是，过长的正则表达式晦涩难懂，即使写出这些正则表达式，过段时间后也不见得能够解释清楚。

带着问题学习，能够有效地增加高级知识，更有针对性，学习效果会更好。为了完成下面的讲述，我们先来看几个问题。

我们使用的文本是医疗领域的50000句中英双语句对，中文和英文之间以`" ||| "`分隔。想象一下我们有以下的检索任务：
* 数字，包括整数和小数
* 英文缩写，骆驼拼写等特殊单词
* 带有连字符的英文单词，包括化合物名字
* 中文中含有的英文单词
* 中英对照的单词、数字

如果搞懂了以上的集个案例，那我们也就入门了通配符和正则表达式。

# Word中的通配符

Word中的通配符在查找替换时很有用。

## 基本概念

1. `?`, `*`

    `?`代表一个单独的字符，例如`s?t`可以找到`sat`, `sit`, `set`等开头为`s`结尾为`t`的长度为3的字符串

    `*`代表任意个数的字符，例如`s*t`可以找到`st`, `sit`, `secret`, `serpent`, `sailing boat`等

2. `@`

    `@`代表重复前一个字符一次或者多次，例如`lo@t`可以找到`lot`, `loot`, 非贪婪

3. `<`, `>`

    `<`代表一个单词的开始，而`>`代表一个单词的结束。他们本身不匹配任何单词，但是能够指明匹配的位置。例如`<s*t>`可以匹配任何以`s`开头以`t`结尾的片段：`tea-set`中的`set`，但是不能匹配`toolset`中的`set`，因为不是单词边界。

    `<`, `>`可以单独使用，例如`ful@>`可以匹配`full`, `wilful`中的`ful`，但是不能匹配`wilfully`中的`full`。

4. `[]`

    用`[]`表示一个集合中的任意一个元素，`[abc]`会匹配`a`, `b`, `c`中的任意一个字符。`[]`也能够支持区间查找，例如`[A-Z]`可以匹配所有的英文大写字母，`[A-Za-z]`可以匹配所有的英文字母。

5. `\`

    如果你想查找任意有特殊含义的字符，例如通配符中的`?`, `*`, `@`, 应当在前面加上`\`进行转义，例如`\?`, `\*`, `\@`。如果想要查找`\`本身，应当使用`\\`。

    列举通配符查找中的特殊含义字符： `[ ] { } < > ( ) - @ ? ! * \`

6. `[!]`

    用`[!]`表示任意一个非集合元素的字符，`[!abc]`会匹配除了`a`, `b`, `c`以外的一个任意字符。`[!]`也能够支持区间查找，例如`[!A-Z]`可以匹配所有非英文大写字母的字符。

7. `{}`

    用`{n}`表示重复前面的字符`n`次，`{n,}`表示重复前面的字符不少于`n`次，`{n,m}`表示重复前面的字符不少于`n`次，不多于`m`次。例如：`[deno]{4}`可以匹配`done`, `node`, `eden`，`a{2,3}`可以匹配`aa`, `aaa`

8. `()`

    用`()`表示捕获组，例如`(John) (Smith)`，其第一个捕获组`\1`指的是`John`，第二个组`\2`指的是`Smith`。这在替换中非常有用，例如，将`JavaScript`, `PowerShell`替换为`Java Script`, `Power Shell`, 可以这样写：

    查找：`<([A-Z][a-z]@)([A-Z][a-z]@)>`

    替换：`\1 \2`

    这在解析html标签时也十分有用，例如给`<title>正则表达式</title>`脱括号：

    查找：`\<([!<>]@)\>(*)\</\1\>`

    替换：`\2`

9. `^`

    使用`^`代表acsii字符转义和一些特殊的字符，例如制表符`^t`, 可以在Word的特殊格式中找到。有一些例如`^p`段落标记不能与通配符同时使用，因此需要用unicode编码。

## 高级概念

1. 贪婪，非贪婪

    贪婪的含义是：尽可能地匹配全部的字符串。Word的查找是从光标位置向后一位一位地查找，使用`*`, `@`时，一旦匹配表达式，则报告，因此，`*`, `@`是非贪婪的。与之不同的是，`{n,}`则会侵吞遇到的全部字符串，并不再回溯。

    要匹配`looootloooot`, 由于`*`, `@`非贪婪，故应当对匹配内容进行精确描述：

    `l*t`或者`l[lot]@t`只能够匹配前面的`loooot`, 而`l*t>`或者`l[lot]@t>`则可以匹配全部。

    `l[lot]{1,}t`不能匹配，因为`l[lot]{1,}`就已经侵吞了全部的字符串，没有机会留给最后一位的`t`。

2. 字符编码

    使用`^`后面跟上数字，可以表示一位ASCII字符。例如`^13`代表的就是回车符`\r`, 也就是Word里面的段落标记`^p`。ASCII有效范围`[^1-^128]`。
    
    此外还支持unicode范围查找，比如匹配中文：`[一-龥]`，即unicode编码`[\u4e00-\u9fa5]`。


## 参考
* Unicode字符：[Unicode字符列表](https://zh.wikipedia.org/wiki/Unicode%E5%AD%97%E7%AC%A6%E5%88%97%E8%A1%A8), [Unicode/Character reference](https://en.wikibooks.org/wiki/Unicode/Character_reference/0000-0FFF), [Unicode 10.0 Character Code Charts](https://www.unicode.org/charts), [世界文字大全，Unicode 字符集](http://www.qqxiuzi.cn/zh/unicode-zifu.php?plane=0&ks=0000&js=0FFF)

* Word查找替换详解：[Word中的查找与替换通配符详解](https://wenku.baidu.com/view/3c2f6b59ad02de80d4d8406b.html?re=view)


# Antconc中的正则表达式



